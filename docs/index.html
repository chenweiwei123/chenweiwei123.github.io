<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>åˆ†ç»„å¯¼èˆªé¡µ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Font Awesome å›¾æ ‡åº“ -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    body {
      margin: 0;
      padding: 40px 20px;
      font-family: "Helvetica Neue", sans-serif;
      background: center center no-repeat fixed;
      background-size: cover;
      position: relative;
      z-index: 0;
      transition: background-image 0.6s ease;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(6px);
      z-index: -1;
    }
    .wallpaper-toggle {
      text-align: center;
      margin-bottom: 30px;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 12px;
      background-color: #f9f9f9;
    }

    .wallpaper-toggle summary {
      font-size: 16px;
      cursor: pointer;
    }

    /* æ–°å¢å£çº¸è®¾ç½®é¢æ¿æ ·å¼ */
    .wallpaper-controls {
      text-align: center;
      margin-bottom: 30px;
    }

    .wallpaper-option {
      display: inline-block;
      width: 60px;
      height: 40px;
      margin: 0 8px;
      border-radius: 6px;
      overflow: hidden;
      border: 2px solid transparent;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    .wallpaper-option:hover {
      transform: scale(1.1);
      border-color: #007bff;
    }

    .wallpaper-option.selected {
      border-color: #007bff;
    }

    .toggle-btn {
      display: inline-block;
      margin-left: 12px;
      font-size: 14px;
      cursor: pointer;
      color: #007bff;
    }

    h1 {
      text-align: center;
      font-size: 36px;
      color: #222;
      margin-bottom: 20px;
    }

    .search-box {
      text-align: center;
      margin-bottom: 30px;
    }

    .search-box input {
      padding: 10px 14px;
      font-size: 16px;
      width: 280px;
      border: 1px solid #ccc;
      border-radius: 8px;
      outline: none;
    }

    .group-card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
      margin: 0 auto 30px auto;
      padding: 20px 24px;
      max-width: 900px;
    }

    .group-title {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 18px;
      color: #007BFF;
      border-bottom: 1px solid #eee;
      padding-bottom: 8px;
    }

    .nav-list {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #f9f9f9;
      border-radius: 10px;
      padding: 10px 16px;
      text-decoration: none;
      color: #333;
      font-size: 16px;
      flex: 1 1 200px;
      transition: background 0.3s ease, transform 0.3s ease;
      position: relative;
    }

    .nav-item:hover {
      background: #e6f0ff;
      transform: translateY(-2px);
    }

    .nav-left {
      display: flex;
      align-items: center;
    }

    .nav-icon {
      font-size: 20px;
      margin-right: 10px;
      transition: transform 0.3s ease;
    }

    .nav-item:hover .nav-icon {
      transform: scale(1.2) rotate(8deg);
    }

    .fav-icon {
      color: #ccc;
      cursor: pointer;
      font-size: 16px;
      transition: color 0.3s;
    }

    .fav-icon.active {
      color: gold;
    }

    .hidden {
      display: none !important;
    }
  </style>
</head>
<body>
<h1>ğŸŒ æˆ‘çš„å¯¼èˆªé¡µ</h1>
<details id="dailyWallpaperToggle" class="wallpaper-toggle">
  <summary>æ¯æ—¥å£çº¸è®¾ç½®</summary>
  <div class="wallpaper-controls">
    <span>é€‰æ‹©å£çº¸ï¼š</span>
    <div id="wallpaperOptions" style="display:inline-block;"></div>
    <span class="toggle-btn" id="toggleDaily">åˆ‡æ¢æ¯æ—¥æ¨¡å¼</span>
    <input type="file" id="uploadWallpaper" accept="image/*" style="display: none;" />
    <label for="uploadWallpaper" class="toggle-btn">ä¸Šä¼ è‡ªå®šä¹‰å£çº¸</label>
  </div>
</details>
<div class="search-box">
  <input type="text" id="searchInput" placeholder="æœç´¢ç½‘ç«™åç§°...">
</div>

<div id="navRoot"></div>

<script>
  // æ¨¡æ‹Ÿä» nav.json è¯»å–çš„ç»“æ„
  const navData = {
    "å¸¸ç”¨ç½‘ç«™": [
      { name: "ç™¾åº¦", url: "https://www.baidu.com", icon: "fa-solid fa-magnifying-glass" },
      { name: "Google", url: "https://www.google.com", icon: "fa-brands fa-google" },
      { name: "çŸ¥ä¹", url: "https://www.zhihu.com", icon: "fa-solid fa-lightbulb" },
      { name: "æ˜é‡‘é…±", url: "https://e.juejin.cn/#/", icon: "fa-solid fa-tv" }
      { name: "æ˜é‡‘é…±123", url: "https://e.juejin.cn/#/", icon: "fa-solid fa-tv" }

    ],
    "åŸºç¡€å·¥å…·": [
      { name: "GitHub", url: "https://github.com", icon: "fa-brands fa-github" },
      { name: "Stack Overflow", url: "https://stackoverflow.com", icon: "fa-brands fa-stack-overflow" },
      { name: "W3School", url: "https://www.w3school.com.cn", icon: "fa-solid fa-book" },
      { name: "é©¬ä¸å­¦ç¼–ç¨‹", url: "https://nageoffer.com/", icon: "fa-solid fa-code" }
    ]
  };

  const navRoot = document.getElementById("navRoot");
  const searchInput = document.getElementById("searchInput");
  const allNavItems = [];

  // ä» localStorage è·å–æ”¶è—å¤¹
  const favoriteUrls = new Set(JSON.parse(localStorage.getItem("favorites") || "[]"));

  // æ·»åŠ æ”¶è—å¤¹åˆ†ç»„
  function renderFavorites() {
    const favorites = [];
    for (const [group, items] of Object.entries(navData)) {
      for (const item of items) {
        if (favoriteUrls.has(item.url)) {
          favorites.push(item);
        }
      }
    }
    if (favorites.length > 0) {
      renderGroup("â­ æ”¶è—å¤¹", favorites, true);
    }
  }

  // æ¸²æŸ“å•ä¸ªåˆ†ç»„
  function renderGroup(title, links, isFavorites = false) {
    const groupCard = document.createElement("div");
    groupCard.className = "group-card";

    const titleEl = document.createElement("div");
    titleEl.className = "group-title";
    titleEl.textContent = title;

    const navList = document.createElement("div");
    navList.className = "nav-list";

    links.forEach(link => {
      const a = document.createElement("a");
      a.className = "nav-item";
      a.href = link.url;
      a.target = "_blank";

      const left = document.createElement("div");
      left.className = "nav-left";
      left.innerHTML = `
          <i class="nav-icon ${link.icon}"></i>
          <div class="nav-name">${link.name}</div>
        `;

      const fav = document.createElement("i");
      fav.className = "fa-star fav-icon fas";
      if (favoriteUrls.has(link.url)) {
        fav.classList.add("active");
      }

      fav.addEventListener("click", e => {
        e.preventDefault();
        e.stopPropagation();
        if (favoriteUrls.has(link.url)) {
          favoriteUrls.delete(link.url);
          fav.classList.remove("active");
        } else {
          favoriteUrls.add(link.url);
          fav.classList.add("active");
        }
        localStorage.setItem("favorites", JSON.stringify([...favoriteUrls]));
        // é‡æ–°æ¸²æŸ“æ”¶è—å¤¹
        renderAll();
      });

      a.appendChild(left);
      a.appendChild(fav);
      navList.appendChild(a);
      if (!isFavorites) {
        allNavItems.push({ element: a, name: link.name.toLowerCase() });
      }
    });

    groupCard.appendChild(titleEl);
    groupCard.appendChild(navList);
    navRoot.appendChild(groupCard);
  }

  // æ¸²æŸ“æ‰€æœ‰åˆ†ç»„ï¼ˆå«æ”¶è—å¤¹ï¼‰
  function renderAll() {
    navRoot.innerHTML = "";
    renderFavorites();
    for (const [group, links] of Object.entries(navData)) {
      renderGroup(group, links);
    }
  }

  renderAll();

  // æœç´¢è¿‡æ»¤
  searchInput.addEventListener("input", function () {
    const keyword = this.value.trim().toLowerCase();
    allNavItems.forEach(({ element, name }) => {
      element.classList.toggle("hidden", !name.includes(keyword));
    });
  });

  // å£çº¸åŠŸèƒ½
  const wallpapers = [
    "https://picsum.photos/1920/1080/?mountain",
    "https://picsum.photos/1920/1080/?city",
    "https://picsum.photos/1920/1080/?space",
    "https://picsum.photos/1920/1080/?coding",
    "https://picsum.photos/1920/1080/?landscape"
  ];

  const wallpaperKey = "custom_wallpaper";
  const dailyModeKey = "wallpaper_daily";

  const wallpaperContainer = document.getElementById("wallpaperOptions");
  const toggleBtn = document.getElementById("toggleDaily");

  function applyWallpaper() {
    const dailyMode = localStorage.getItem(dailyModeKey) !== "false";
    if (dailyMode) {
      document.body.style.backgroundImage = `url('https://source.unsplash.com/1920x1080/?nature')`;
      toggleBtn.textContent = "æ¯æ—¥ä¸€å›¾ï¼šå¼€";
    } else {
      let custom = localStorage.getItem(wallpaperKey);
      if (!custom) {
        // é¦–æ¬¡è®¿é—®ï¼Œéšæœºé€‰ä¸€å¼ å£çº¸
        custom = wallpapers[Math.floor(Math.random() * wallpapers.length)];
        localStorage.setItem(wallpaperKey, custom);
      }
      document.body.style.backgroundImage = `url('${custom}')`;
      toggleBtn.textContent = "æ¯æ—¥ä¸€å›¾ï¼šå…³";
    }
  }

  function renderWallpaperOptions() {
    wallpaperContainer.innerHTML = "";
    wallpapers.forEach((url, idx) => {
      const div = document.createElement("div");
      div.className = "wallpaper-option";
      div.style.backgroundImage = `url('${url}')`;
      div.style.backgroundSize = "cover";
      div.title = `å£çº¸${idx + 1}`;

      if (localStorage.getItem(wallpaperKey) === url) {
        div.classList.add("selected");
      }

      div.onclick = () => {
        localStorage.setItem(wallpaperKey, url);
        localStorage.setItem(dailyModeKey, "false");
        applyWallpaper();
        renderWallpaperOptions();
      };

      wallpaperContainer.appendChild(div);
    });
  }

  toggleBtn.onclick = () => {
    const current = localStorage.getItem(dailyModeKey) !== "false";
    localStorage.setItem(dailyModeKey, String(!current));
    applyWallpaper();
  };

  renderWallpaperOptions();
  applyWallpaper();
  document.getElementById("dailyWallpaperToggle").addEventListener("toggle", function () {
    if (!this.open) {
      // æŠ˜å æ—¶å¯æ‰§è¡Œçš„æ“ä½œï¼ˆå¦‚é‡Šæ”¾èµ„æºï¼‰
    } else {
      // å±•å¼€æ—¶å¯æ‰§è¡Œçš„æ“ä½œï¼ˆå¦‚åˆ·æ–°å£çº¸åˆ—è¡¨ï¼‰
      renderWallpaperOptions();
    }
  });
</script>

</body>
</html>