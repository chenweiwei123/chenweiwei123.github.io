<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>æŠ€æœ¯å¯¼èˆªé¡µ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="ä¸ªæ€§åŒ–æŠ€æœ¯å¯¼èˆªé¡µé¢ï¼Œå¿«é€Ÿè®¿é—®å¸¸ç”¨å¼€å‘èµ„æº">

  <!-- Font Awesome å›¾æ ‡åº“ -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary-color: #1a2250;
      --secondary-color: #3f37c9;
      --accent-color: #4895ef;
      --light-color: #f8f9fa;
      --dark-color: #212529;
      --success-color: #4cc9f0;
      --warning-color: #c11f6a;
      --border-radius: 12px;
      --box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 40px 20px;
      font-family: 'Poppins', 'Helvetica Neue', sans-serif;
      background: center center no-repeat fixed;
      background-size: cover;
      position: relative;
      z-index: 0;
      transition: background-image 0.6s ease;
      min-height: 100vh;
      color: var(--dark-color);
    }

    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(8px);
      z-index: -1;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* å£çº¸è®¾ç½®é¢æ¿ */
    .wallpaper-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      background-color: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(0, 0, 0, 0.1);
      border-radius: var(--border-radius);
      padding: 12px 16px;
      box-shadow: var(--box-shadow);
      width: auto;
      max-width: calc(100% - 40px);
      transition: var(--transition);
    }

    .wallpaper-toggle:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
    }

    .wallpaper-toggle summary {
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      color: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .wallpaper-toggle summary::after {
      content: "âŒ„";
      font-size: 18px;
      transition: transform 0.2s;
    }

    .wallpaper-toggle[open] summary::after {
      transform: rotate(-180deg);
    }

    .wallpaper-controls {
      text-align: center;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid rgba(0, 0, 0, 0.05);
    }

    .wallpaper-options {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin: 15px 0;
    }

    .wallpaper-option {
      width: 80px;
      height: 50px;
      border-radius: 8px;
      overflow: hidden;
      border: 2px solid transparent;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
    }

    .wallpaper-option::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.3);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .wallpaper-option:hover {
      transform: scale(1.05);
      border-color: var(--primary-color);
    }

    .wallpaper-option:hover::after {
      opacity: 1;
    }

    .wallpaper-option.selected {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px white, 0 0 0 4px var(--primary-color);
    }

    .wallpaper-option.selected::after {
      content: "âœ“";
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: bold;
      opacity: 1;
      background: rgba(67, 97, 238, 0.7);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 8px 16px;
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      margin: 5px;
    }

    .btn:hover {
      background-color: var(--secondary-color);
      transform: translateY(-2px);
    }

    .btn-outline {
      background-color: transparent;
      border: 1px solid var(--primary-color);
      color: var(--primary-color);
    }

    .btn-outline:hover {
      background-color: rgba(67, 97, 238, 0.1);
    }

    .btn i {
      margin-right: 6px;
    }

    /* æ ‡é¢˜æ ·å¼ */
    .header {
      text-align: center;
      margin-bottom: 40px;
      position: relative;
    }

    .header h1 {
      font-size: 2.5rem;
      font-weight: 600;
      color: var(--dark-color);
      margin: 0;
      display: inline-flex;
      align-items: center;
      position: relative;
    }

    .header h1 .icon {
      margin-left: 15px;
      color: var(--primary-color);
      transition: transform 0.5s ease;
    }

    .header h1:hover .icon {
      transform: rotate(45deg) scale(1.2);
    }

    /* æœç´¢æ¡† */
    .search-box {
      text-align: center;
      margin-bottom: 40px;
      position: relative;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .search-box input {
      padding: 12px 20px;
      font-size: 16px;
      width: 100%;
      border: 2px solid rgba(0, 0, 0, 0.1);
      border-radius: 50px;
      outline: none;
      transition: var(--transition);
      background-color: rgba(255, 255, 255, 0.8);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    .search-box input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    }

    .search-box::after {
      content: "\f002";
      font-family: "Font Awesome 6 Free";
      font-weight: 900;
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(0, 0, 0, 0.3);
    }

    /* å¯¼èˆªç»„ */
    .nav-group {
      margin-bottom: 30px;
    }

    .group-card {
      background: rgba(255, 255, 255, 0.9);
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      margin: 0 auto 30px auto;
      padding: 20px 24px;
      max-width: 1000px;
      transition: var(--transition);
      border: 1px solid rgba(0, 0, 0, 0.05);
      margin-left: 0 !important;
      margin-right: auto !important;
    }

    .group-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
    }

    .group-title {
      font-size: 1.4rem;
      font-weight: 600;
      margin-bottom: 20px;
      color: var(--primary-color);
      padding-bottom: 10px;
      border-bottom: 2px solid rgba(67, 97, 238, 0.1);
      display: flex;             /* åŸæœ‰ */
      align-items: center;       /* åŸæœ‰ */
      white-space: nowrap;       /* æ–°å¢ï¼šç¡®ä¿æ–‡å­—ä¸æ¢è¡Œ */
    }

    .group-title i {
      font-size: 1.4rem;
      font-weight: 600;
      margin-bottom: 20px;
      color: var(--primary-color);
      padding-bottom: 10px;
      border-bottom: 2px solid rgba(67, 97, 238, 0.1);
      display: flex;
      align-items: center;
      text-align: left;
      margin-right: 10px;
    }

    .nav-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 16px;
      text-align: left;
    }

    @media (max-width: 768px) {
      .nav-list {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      }
    }

    @media (max-width: 480px) {
      .nav-list {
        grid-template-columns: 1fr;
      }
    }

    /* å¯¼èˆªé¡¹ */
    .nav-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(248, 249, 250, 0.8);
      border-radius: 10px;
      padding: 14px 18px;
      text-decoration: none;
      color: var(--dark-color);
      font-size: 16px;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .nav-item::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 3px;
      height: 100%;
      background: var(--primary-color);
      transform: scaleY(0);
      transform-origin: bottom;
      transition: transform 0.3s ease;
    }

    .nav-item:hover {
      background: white;
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
    }

    .nav-item:hover::before {
      transform: scaleY(1);
    }

    .nav-left {
      display: flex;
      align-items: center;
      flex: 1;
    }

    .nav-icon {
      font-size: 20px;
      margin-right: 12px;
      width: 24px;
      text-align: center;
      color: var(--primary-color);
      transition: var(--transition);
    }

    .nav-item:hover .nav-icon {
      transform: scale(1.2) rotate(8deg);
      color: var(--accent-color);
    }

    .nav-name {
      font-weight: 500;
      transition: var(--transition);
    }

    .nav-item:hover .nav-name {
      color: var(--primary-color);
    }

    .fav-icon {
      color: rgba(0, 0, 0, 0.2);
      cursor: pointer;
      font-size: 16px;
      transition: var(--transition);
      padding: 8px;
      margin: -8px;
    }

    .fav-icon:hover {
      color: gold;
      transform: scale(1.2);
    }

    .fav-icon.active {
      color: gold;
      text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
    }

    .hidden {
      display: none !important;
    }

    /* ç©ºçŠ¶æ€ */
    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: rgba(0, 0, 0, 0.5);
    }

    .empty-state i {
      font-size: 48px;
      margin-bottom: 20px;
      color: rgba(0, 0, 0, 0.2);
    }

    /* åŠ¨ç”» */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .nav-item {
      animation: fadeIn 0.4s ease forwards;
      opacity: 0;
    }
    .toggle-btn {
      margin-left: 10px;
      cursor: pointer;
      user-select: none;
      font-size: 18px;
    }
    /* å»¶è¿ŸåŠ¨ç”» */
    .nav-item:nth-child(1) { animation-delay: 0.1s; }
    .nav-item:nth-child(2) { animation-delay: 0.2s; }
    .nav-item:nth-child(3) { animation-delay: 0.3s; }
    .nav-item:nth-child(4) { animation-delay: 0.4s; }
    .nav-item:nth-child(5) { animation-delay: 0.5s; }
    .nav-item:nth-child(6) { animation-delay: 0.6s; }
    .nav-item:nth-child(7) { animation-delay: 0.7s; }
    .nav-item:nth-child(8) { animation-delay: 0.8s; }
    .nav-item:nth-child(9) { animation-delay: 0.9s; }
    .nav-item:nth-child(10) { animation-delay: 1.0s; }

    /* æš—è‰²æ¨¡å¼ */
    @media (prefers-color-scheme: dark) {
      body {
        color: #f8f9fa;
      }

      body::before {
        background: rgba(0, 0, 0, 0.7);
      }

      .nav-item {
        background: rgba(30, 30, 30, 0.8);
        color: #f8f9fa;
      }
      .group-card {
        background: rgba(255, 255, 255, 0.9);
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        margin: 0 auto 30px auto;
        padding: 20px 24px;
        max-width: 1000px;
        transition: var(--transition);
        border: 1px solid rgba(0, 0, 0, 0.05);
        margin-left: 0 !important;
        margin-right: auto !important;
        padding-left: 24px; /* å¯é€‰ï¼šå¾®è°ƒå·¦ä¾§å†…è¾¹è· */
        padding-right: 24px;
      }

      .nav-item {
        background: rgba(40, 40, 40, 0.8);
        border-color: rgba(255, 255, 255, 0.05);
      }

      .search-box input {
        background-color: rgba(30, 30, 30, 0.8);
        border-color: rgba(255, 255, 255, 0.1);
        color: #f8f9fa;
      }

      .wallpaper-toggle {
        background-color: rgba(30, 30, 30, 0.9);
        border-color: rgba(255, 255, 255, 0.1);
      }

      .wallpaper-toggle summary {
        color: var(--accent-color);
      }
    }
    #sidenav a:hover {
      color: var(--primary-color);
    }

    @media (prefers-color-scheme: dark) {
      #sidenav {
        background-color: rgba(30, 30, 30, 0.95);
      }

      #sidenav a {
        color: #f8f9fa;
      }

      #sidenav a:hover {
        color: var(--accent-color);
      }
    }
  </style>
</head>
<body>
<div class="container">
  <header class="header">
    <h1>æˆ‘çš„æŠ€æœ¯å¯¼èˆª <i class="fas fa-rocket icon"></i></h1>
    <p class="subtitle">å¿«é€Ÿè®¿é—®æ‚¨æœ€å–œçˆ±çš„å¼€å‘èµ„æº</p>
  </header>
  <!-- å³ä¾§æ‚¬æµ®ç›®å½• -->
  <div id="sidenav" style="position: fixed; right: 20px; top: 50%; transform: translateY(-50%); background: rgba(255, 255, 255, 0.95); padding: 10px 16px;">

  </div>
  <div class="search-box">
    <input type="text" id="searchInput" placeholder="æœç´¢ç½‘ç«™åç§°æˆ–å…³é”®è¯...">
  </div>

  <div id="navRoot"></div>
</div>

<details id="dailyWallpaperToggle" class="wallpaper-toggle">
  <summary><i class="fas fa-image"></i> å£çº¸è®¾ç½®</summary>
  <div class="wallpaper-controls">
    <div class="wallpaper-options" id="wallpaperOptions"></div>
    <button class="btn" id="toggleDaily"><i class="fas fa-sync-alt"></i> æ¯æ—¥å£çº¸</button>
    <input type="file" id="uploadWallpaper" accept="image/*" style="display: none;" />
    <label for="uploadWallpaper" class="btn btn-outline"><i class="fas fa-upload"></i> ä¸Šä¼ å£çº¸</label>
  </div>
</details>
<script>

  // å¯¼èˆªæ•°æ®
  const navData = {
    "å¸¸ç”¨ç½‘ç«™": [
      { name: "ç™¾åº¦", url: "https://www.baidu.com", icon: "fa-solid fa-magnifying-glass" },
      { name: "Google", url: "https://www.google.com", icon: "fa-brands fa-google" },
      { name: "çŸ¥ä¹", url: "https://www.zhihu.com", icon: "fa-solid fa-lightbulb" },
      { name: "æ˜é‡‘", url: "https://juejin.cn", icon: "fa-solid fa-gem" },
      { name: "CSDN", url: "https://www.csdn.net", icon: "fa-solid fa-code" }
    ],
    "å¼€å‘å·¥å…·": [
      { name: "GitHub", url: "https://github.com", icon: "fa-brands fa-github" },
      { name: "GitLab", url: "https://gitlab.com", icon: "fa-brands fa-gitlab" },
      { name: "Stack Overflow", url: "https://stackoverflow.com", icon: "fa-brands fa-stack-overflow" },
      { name: "CodePen", url: "https://codepen.io", icon: "fa-brands fa-codepen" }
    ],
    "å­¦ä¹ èµ„æº": [
      { name: "MDN Web Docs", url: "https://developer.mozilla.org", icon: "fa-brands fa-firefox" },
      { name: "W3School", url: "https://www.w3school.com.cn", icon: "fa-solid fa-book" },
      { name: "èœé¸Ÿæ•™ç¨‹", url: "https://www.runoob.com", icon: "fa-solid fa-graduation-cap" },
      { name: "LeetCode", url: "https://leetcode.cn", icon: "fa-solid fa-laptop-code" }
    ],
    "è®¾è®¡èµ„æº": [
      { name: "Dribbble", url: "https://dribbble.com", icon: "fa-brands fa-dribbble" },
      { name: "Behance", url: "https://www.behance.net", icon: "fa-brands fa-behance" },
      { name: "Figma", url: "https://www.figma.com", icon: "fa-brands fa-figma" },
      { name: "Unsplash", url: "https://unsplash.com", icon: "fa-solid fa-camera" }
    ]
  };

  // DOMå…ƒç´ 
  const navRoot = document.getElementById("navRoot");
  const searchInput = document.getElementById("searchInput");
  const allNavItems = [];

  // ä» localStorage è·å–æ”¶è—å¤¹
  const favoriteUrls = new Set(JSON.parse(localStorage.getItem("favorites") || "[]"));
  function renderSideNav() {
    const sidenav = document.getElementById("sidenav");
    sidenav.innerHTML = ""; // æ¸…ç©ºæ—§å†…å®¹

    for (const [group] of Object.entries(navData)) {
      const link = document.createElement("a");
      link.href = `#${group}`;
      link.textContent = group;
      link.style.display = "block";
      link.style.color = "var(--dark-color)";
      link.style.fontWeight = "500";
      link.style.fontSize = "14px";
      link.style.textDecoration = "none";
      link.style.cursor = "pointer";

      // å¹³æ»‘æ»šåŠ¨åˆ°å¯¹åº”é”šç‚¹
      link.addEventListener("click", function (e) {
        e.preventDefault();
        const target = document.querySelector(`[data-group="${group}"]`);
        if (target) {
          target.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      });

      sidenav.appendChild(link);
    }
  }
  // æ¸²æŸ“æ”¶è—å¤¹
  function renderFavorites() {
    const favorites = [];
    for (const [group, items] of Object.entries(navData)) {
      for (const item of items) {
        if (favoriteUrls.has(item.url)) {
          favorites.push(item);
        }
      }
    }

    if (favorites.length > 0) {
      renderGroup("â­ æˆ‘çš„æ”¶è—", favorites, true);
    }
  }

  // æ¸²æŸ“å•ä¸ªåˆ†ç»„
  function renderGroup(title, links, isFavorites = false) {
    const groupContainer = document.createElement("details");
    groupContainer.open = true;
    groupContainer.setAttribute("data-group", title);

    const summary = document.createElement("summary");
    summary.className = "group-title";
    summary.style.display = "flex";
    summary.style.justifyContent = "space-between";
    summary.style.alignItems = "center";

    const toggleBtn = document.createElement("span");
    toggleBtn.className = "toggle-btn";
    toggleBtn.textContent = groupContainer.open ? "â–¼" : "â–¶"; // å¯é€‰ï¼šåˆå§‹å›¾æ ‡
    toggleBtn.style.marginLeft = "10px";
    toggleBtn.style.cursor = "pointer";
    toggleBtn.style.userSelect = "none";
    toggleBtn.style.fontSize = "18px";

    // æ ¹æ®åˆ†ç»„åè·å–å›¾æ ‡
    const groupIcon = getGroupIcon(title);
    // summary.innerHTML = `<i class="${groupIcon}"></i>${title}`;
    summary.innerHTML = `${title}`;
    summary.appendChild(toggleBtn);
    summary.style.justifyContent = "flex-start"; // å…³é”®ï¼šè®©å†…å®¹é å·¦æ’åˆ—

    // ç›‘å¬ç‚¹å‡»äº‹ä»¶åˆ‡æ¢ open çŠ¶æ€
    toggleBtn.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();

      groupContainer.open = !groupContainer.open;
      toggleBtn.textContent = groupContainer.open ? "â–¼" : "â–¶";
    });

    const groupCard = document.createElement("div");
    groupCard.className = "group-card";
    groupCard.setAttribute("data-group", title); // æ·»åŠ é”šç‚¹å±æ€§

    const navList = document.createElement("div");
    navList.className = "nav-list";

    links.forEach((link, index) => {
      const navItem = document.createElement("a");
      navItem.className = "nav-item";
      navItem.href = link.url;
      navItem.target = "_blank";
      navItem.rel = "noopener noreferrer";
      navItem.style.animationDelay = `${index * 0.1}s`;

      navItem.innerHTML = `      <div class="nav-left">
        <i class="nav-icon ${link.icon}"></i>
        <div class="nav-name">${link.name}</div>
      </div>
      <i class="fa-star fav-icon ${favoriteUrls.has(link.url) ? 'active fas' : 'far'}"></i>
    `;

      const favIcon = navItem.querySelector(".fav-icon");
      favIcon.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();

        if (favoriteUrls.has(link.url)) {
          favoriteUrls.delete(link.url);
          favIcon.classList.remove("active", "fas");
          favIcon.classList.add("far");
        } else {
          favoriteUrls.add(link.url);
          favIcon.classList.add("active", "fas");
          favIcon.classList.remove("far");
        }

        localStorage.setItem("favorites", JSON.stringify([...favoriteUrls]));
        renderAll();

      });

      navList.appendChild(navItem);

      if (!isFavorites) {
        allNavItems.push({ element: navItem, name: link.name.toLowerCase() });
      }
    });

    groupCard.appendChild(navList);
    groupContainer.appendChild(summary);
    groupContainer.appendChild(groupCard);

    navRoot.appendChild(groupContainer);
  }

  // è·å–åˆ†ç»„å›¾æ ‡
  function getGroupIcon(title) {
    switch(title) {
      case "å¸¸ç”¨ç½‘ç«™": return "fas fa-globe";
      case "å¼€å‘å·¥å…·": return "fas fa-tools";
      case "å­¦ä¹ èµ„æº": return "fas fa-graduation-cap";
      case "è®¾è®¡èµ„æº": return "fas fa-palette";
      default: return "fas fa-folder";
    }
  }

  // æ¸²æŸ“æ‰€æœ‰åˆ†ç»„
  function renderAll() {
    navRoot.innerHTML = "";
    renderFavorites();

    for (const [group, links] of Object.entries(navData)) {
      renderGroup(group, links);
    }
    renderSideNav();
  }

  // åˆå§‹åŒ–æ¸²æŸ“
  renderAll();

  // æœç´¢åŠŸèƒ½
  searchInput.addEventListener("input", debounce(function() {
    const keyword = this.value.trim().toLowerCase();

    if (keyword === "") {
      renderAll();
      return;
    }

    // åˆ›å»ºæœç´¢ç»“æœå®¹å™¨
    navRoot.innerHTML = "";
    const searchResults = [];

    // æœç´¢æ‰€æœ‰å¯¼èˆªé¡¹
    for (const [group, items] of Object.entries(navData)) {
      for (const item of items) {
        if (item.name.toLowerCase().includes(keyword) ||
                group.toLowerCase().includes(keyword)) {
          searchResults.push(item);
        }
      }
    }

    if (searchResults.length > 0) {
      renderGroup("ğŸ” æœç´¢ç»“æœ", searchResults);
    } else {
      // æ— ç»“æœæç¤º
      const noResults = document.createElement("div");
      noResults.className = "empty-state";
      noResults.innerHTML = `
        <i class="fas fa-search"></i>
        <h3>æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„ç»“æœ</h3>
        <p>å°è¯•ä½¿ç”¨ä¸åŒçš„å…³é”®è¯æœç´¢</p>
      `;
      navRoot.appendChild(noResults);
    }
  }, 300));

  // é˜²æŠ–å‡½æ•°
  function debounce(func, delay) {
    let timeout;
    return function() {
      clearTimeout(timeout);
      timeout = setTimeout(() => func.apply(this, arguments), delay);
    };
  }

  // å£çº¸åŠŸèƒ½
  const wallpapers = [
    "https://picsum.photos/1920/1080/?mountain",
    "https://picsum.photos/1920/1080/?city",
    "https://picsum.photos/1920/1080/?space",
    "https://picsum.photos/1920/1080/?coding",
    "https://picsum.photos/1920/1080/?landscape",
    "https://picsum.photos/1920/1080/?water",
    "https://picsum.photos/1920/1080/?forest",
    "https://picsum.photos/1920/1080/?night"
  ];

  const wallpaperKey = "custom_wallpaper";
  const dailyModeKey = "wallpaper_daily";

  const wallpaperContainer = document.getElementById("wallpaperOptions");
  const toggleBtn = document.getElementById("toggleDaily");
  const uploadInput = document.getElementById("uploadWallpaper");

  // åº”ç”¨å£çº¸
  function applyWallpaper() {
    const dailyMode = localStorage.getItem(dailyModeKey) !== "false";

    if (dailyMode) {
      // æ¯æ—¥å£çº¸æ¨¡å¼
      const date = new Date();
      const dayOfYear = Math.floor((date - new Date(date.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
      const dailyWallpaper = `https://picsum.photos/seed/${dayOfYear}/1920/1080`;

      document.body.style.backgroundImage = `url('${dailyWallpaper}')`;
      toggleBtn.innerHTML = `<i class="fas fa-sync-alt"></i> æ¯æ—¥å£çº¸: å¼€`;
    } else {
      // è‡ªå®šä¹‰å£çº¸æ¨¡å¼
      let custom = localStorage.getItem(wallpaperKey);

      if (!custom) {
        // é¦–æ¬¡è®¿é—®ï¼Œéšæœºé€‰ä¸€å¼ å£çº¸
        custom = wallpapers[Math.floor(Math.random() * wallpapers.length)];
        localStorage.setItem(wallpaperKey, custom);
      }

      document.body.style.backgroundImage = `url('${custom}')`;
      toggleBtn.innerHTML = `<i class="fas fa-sync-alt"></i> æ¯æ—¥å£çº¸: å…³`;
    }
  }

  // æ¸²æŸ“å£çº¸é€‰é¡¹
  function renderWallpaperOptions() {
    wallpaperContainer.innerHTML = "";

    wallpapers.forEach((url, idx) => {
      const div = document.createElement("div");
      div.className = "wallpaper-option";
      div.style.backgroundImage = `url('${url}')`;
      div.style.backgroundSize = "cover";
      div.title = `å£çº¸ ${idx + 1}`;

      if (localStorage.getItem(wallpaperKey) === url) {
        div.classList.add("selected");
      }

      div.onclick = () => {
        localStorage.setItem(wallpaperKey, url);
        localStorage.setItem(dailyModeKey, "false");
        applyWallpaper();
        renderWallpaperOptions();
      };

      wallpaperContainer.appendChild(div);
    });
  }

  // åˆ‡æ¢æ¯æ—¥å£çº¸æ¨¡å¼
  toggleBtn.onclick = () => {
    const current = localStorage.getItem(dailyModeKey) !== "false";
    localStorage.setItem(dailyModeKey, String(!current));
    applyWallpaper();
    renderWallpaperOptions();
  };

  // ä¸Šä¼ è‡ªå®šä¹‰å£çº¸
  uploadInput.addEventListener("change", function(e) {
    const file = e.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(event) {
      const imageUrl = event.target.result;
      localStorage.setItem(wallpaperKey, imageUrl);
      localStorage.setItem(dailyModeKey, "false");
      applyWallpaper();
      renderWallpaperOptions();
    };
    reader.readAsDataURL(file);
  });

  // åˆå§‹åŒ–å£çº¸åŠŸèƒ½
  if (!localStorage.getItem(dailyModeKey)) {
    localStorage.setItem(dailyModeKey, "true");
  }

  renderWallpaperOptions();
  applyWallpaper();

  // å£çº¸è®¾ç½®é¢æ¿åˆ‡æ¢äº‹ä»¶
  document.getElementById("dailyWallpaperToggle").addEventListener("toggle", function() {
    if (this.open) {
      renderWallpaperOptions();
    }
  });

</script>

</body>
</html>